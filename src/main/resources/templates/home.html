<html xmlns:th="https://www.thymeleaf.org/">
<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>SB CMS Controller</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    />
    <script
            type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.
min.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
    <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
    />
</head>
<body>
<div class="container-fluid">
    <div class="card-header bg-info text-center text-white">
        <h3>Welcome to SB API/CMS MVC App</h3>
    </div>
    <p th:if="${message!=null}" class="alert alert-primary text-center">
        The Project Status is :
        <span th:text="${message}"></span>
    </p>
    <div class="text-center">
        <a th:href="@{/}" class="btn btn-success text-center">Check Status</a>
    </div>
    <div class="mt-3"></div>

    <div class="col-12 col-md-12 col-sm-12">
        <div class="">
            <h3 class="text-center">Below activity requires authentication</h3>
            <p th:if="${last_state!=null}" class="alert alert-primary text-center mt-4">
                Last operation status is :
                <span th:text="${last_state}"></span>
            </p>
            <form
                    id="auth_form"
                    method="post"
                    th:object="${form_model}"
                    enctype="multipart/form-data"
            >
                <div class="form-group text-center">
                    <div class="row">
                        <div class="col-lg-6 col-md-12 col-sm-12 mt-4">
                            <input
                                    class="form-control"
                                    placeholder="User name"
                                    type="text"
                                    th:field="*{userName}"
                                    id="name"
                            />
                        </div>

                        <div class="col-lg-6 col-md-12 col-sm-12 mt-4">
                            <input
                                    class="form-control"
                                    type="password"
                                    placeholder="User password"
                                    th:field="*{userPass}"
                                    id="password"
                            />
                        </div>
                    </div>

                    <input
                            th:field="*{actionOfTheForm}"
                            id="actionOfTheForm"
                            type="hidden"
                    />

                    <div class="col-lg-12 text-center row mt-3">
                        <div class="col-lg-2 col-sm-2 col-md-2"></div>

                        <div class="col-lg-4 col-sm-4 col-md-4 mt-4">
                            <input
                                    type="button"
                                    onclick="submitForm('stop')"
                                    value="Stop"
                                    class="btn btn-danger"
                            />
                        </div>
                        <div class="col-lg-4 col-sm-4 col-md-4 mt-4">
                            <input
                                    type="button"
                                    onclick="submitForm('restart')"
                                    value="Restart"
                                    class="btn btn-success"
                            />
                        </div>
                        <div class="col-lg-2 col-md-2 col-sm-2"></div>
                    </div>

                    <div class="card mt-4">
                        <div class="card-body">
                            <div class="col-lg-12 col-md-12 col-sm-12 row mt-4">
                                <div class="col-lg-9 col-md-12 col-sm-12 mt-4">
                                    <input
                                            type="file"
                                            name="newfile"
                                            accept="zip,application/octet-stream,application/zip,application/x-zip,application/x-zip-compressed"
                                            class="form-control-file"
                                    />
                                </div>
                                <div class="col-lg-3 col-md-12 col-sm-12 mt-4">
                                    <input
                                            type="button"
                                            onclick="submitForm('upload')"
                                            value="Upload a zip file"
                                            class="btn btn-success"
                                    />
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="mt-4"></div>

    <footer class="bg-light text-center text-lg-start">
        <div
                class="text-center p-3"
                style="background-color: rgba(0, 0, 0, 0.2)"
        >
            Â©
            <script>
            document.write(new Date().getFullYear());
          </script>
            Copyright:
            <a class="text-dark" href="https://github.com/bhuvancom">bhuvancom</a>
        </div>
    </footer>
</div>
<script>
      function submitForm(type) {
        if (!type) {
          alert("Nothing to do");
          return;
        }

        const formType = type;
        const form = $("#auth_form");
        form.attr("action", `/${type}`);
        $("#actionOfTheForm").val(type);
        form.submit();
      }
    </script>
</body>
</html>
